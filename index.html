<!doctype html>
<html>
  <head>
    <title>Taurus AI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="index.css" />
    <link
      id="light-theme-link"
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
    />
    <link
      id="dark-theme-link"
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"
      disabled
    />
    <script>
      // This script runs before the rest of the page to prevent a flash of the wrong theme.
      (function () {
        const theme =
          localStorage.getItem('theme') ||
          (window.matchMedia('(prefers-color-scheme: dark)').matches
            ? 'dark'
            : 'light');
        if (theme === 'dark') {
          document.documentElement.classList.add('dark-theme');
          document
            .getElementById('light-theme-link')
            .setAttribute('disabled', true);
          document
            .getElementById('dark-theme-link')
            .removeAttribute('disabled');
        }
      })();
    </script>
    <script type="importmap">
      {
        "imports": {
          "@google/genai": "https://esm.sh/@google/genai@^0.7.0",
          "marked": "https://esm.sh/marked@^15.0.7",
          "highlight.js": "https://esm.sh/highlight.js@^11.9.0"
        }
      }
    </script>
    <script type="module" src="index.tsx"></script>
  <link rel="stylesheet" href="/index.css">
</head>
  <body>
    <aside id="sidebar">
      <div id="sidebar-header">
        <button id="new-chat-button">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="currentColor"
          >
            <path
              d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"
            />
          </svg>
          <span>New Chat</span>
        </button>
      </div>
      <nav id="history-nav">
        <ul id="history-list"></ul>
      </nav>
      <div id="sidebar-footer">
        <div id="user-details">
          <!-- User details will be populated by JS -->
        </div>
        <button id="about-button">About</button>
      </div>
    </aside>
    <div id="sidebar-overlay" class="hidden"></div>

    <div id="app-container">
      <header>
        <div class="header-left">
          <button id="menu-button" aria-label="Open menu" title="Open menu">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="currentColor"
            >
              <path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z" />
            </svg>
          </button>
          <h1>Taurus AI</h1>
        </div>
        <div class="header-controls">
          <label
            class="theme-switcher"
            for="theme-toggle"
            aria-label="Toggle dark mode"
            title="Toggle dark mode"
          >
            <input type="checkbox" id="theme-toggle" />
            <span class="slider">
              <svg
                class="sun"
                xmlns="http://www.w3.org/2000/svg"
                height="16px"
                viewBox="0 -960 960 960"
                width="16px"
                fill="currentColor"
              >
                <path
                  d="M480-360q-50 0-85-35t-35-85q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35Zm0 80q83 0 141.5-58.5T680-480q0-83-58.5-141.5T480-680q-83 0-141.5 58.5T280-480q0 83 58.5 141.5T480-280ZM80-440q-17 0-28.5-11.5T40-480q0-17 11.5-28.5T80-520h80q17 0 28.5 11.5T200-480q0 17-11.5 28.5T160-440H80Zm720 0q-17 0-28.5-11.5T760-480q0-17 11.5-28.5T800-520h80q17 0 28.5 11.5T920-480q0 17-11.5 28.5T880-440h-80ZM480-760q-17 0-28.5-11.5T440-800v-80q0-17 11.5-28.5T480-920q17 0 28.5 11.5T520-880v80q0 17-11.5 28.5T480-760Zm0 720q-17 0-28.5-11.5T440-80v-80q0-17 11.5-28.5T480-200q17 0 28.5 11.5T520-160v80q0 17-11.5 28.5T480-40ZM226-650l-56-56q-12-12-11.5-28.5T170-763q12-12 28.5-12t28.5 12l56 56q12 12 12 28.5T283-650q-12 12-28.5 12T226-650Zm494 494-56-56q-12-12-12-28.5t12-28.5q12-12 28.5-11.5T737-270l56 56q12 12 11.5 28.5T793-170q-12 12-28.5 12T720-156ZM170-170q-12-12-11.5-28.5T170-227l56-56q12-12 28.5-12t28.5 12q12 12 12 28.5t-12 28.5l-56 56q-12 12-28.5 11.5T170-170Zm550-480-56 56q-12 12-28.5 12T607-607q-12-12-12-28.5t12-28.5l56-56q12-12 28.5-11.5T720-723q12 12 11.5 28.5T720-650Z"
                />
              </svg>
              <svg
                class="moon"
                xmlns="http://www.w3.org/2000/svg"
                height="16px"
                viewBox="0 -960 960 960"
                width="16px"
                fill="currentColor"
              >
                <path
                  d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q51 0 94.5-22.5T840-528q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q117 0 198.5-81.5T760-480q0-117-81.5-198.5T480-760q-10 0-19.5 1t-20.5 3q19 21 31 45t12 51q0 109-75.5 184.5T323-292q-27 0-51-12t-45-31q2 10 3 20.5t1 19.5q0 117 81.5 198.5T480-200Z"
                />
              </svg>
            </span>
          </label>
        </div>
      </header>
      <main>
        <div id="chat-container"></div>
        <button
          id="scroll-to-bottom"
          aria-label="Scroll to bottom"
          title="Scroll to bottom"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="currentColor"
          >
            <path
              d="M480-345 240-585l43-43 197 198 197-198 43 43-240 240Z"
            />
          </svg>
        </button>
        <div id="suggestion-chips-container"></div>
        <form id="chat-form">
          <div id="file-preview-container" class="hidden"></div>
          <input
            type="file"
            id="file-input"
            accept="image/*"
            style="display: none"
          />
          <div id="input-container">
            <input
              type="text"
              id="chat-input"
              placeholder="Enter your message..."
              aria-label="Chat message"
              required
            />
            <button
              type="button"
              id="attach-file-button"
              aria-label="Attach file"
              title="Attach file"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="24px"
                viewBox="0 -960 960 960"
                width="24px"
                fill="currentColor"
              >
                <path
                  d="M720-360q0 66-47 113t-113 47q-66 0-113-47t-47-113q0-66 47-113t113-47q25 0 46 7.5t39 20.5l144-144q29-29 69.5-29t69.5 29q29 29 29 69.5T928-548L692-312q-38 38-89.5 38T513-312q-38-38-38-89.5T513-491l240-240 43 43-240 240q-21 21-21 51t21 51q21 21 51 21t51-21l236-236q-12 18-20.5 39T800-480q-47 0-82.5-18.5T652-548L508-404q-15 15-21.5 32T480-328q0 45 31.5 76.5T598-220q45 0 76.5-31.5T706-328l240-240-43-43-240 240q-3 3-4.5 6.5T657-360q0 15 11.5 26.5T695-322q15 0 26.5-11.5T733-360l43-43-43-43-43 43Z"
                />
              </svg>
            </button>
            <button
              type="button"
              id="voice-input-button"
              aria-label="Record message"
              title="Record message"
            ></button>
          </div>
          <button type="submit" aria-label="Send message">Send</button>
        </form>
      </main>
    </div>

    <aside id="thread-panel" class="hidden">
      <div id="thread-header">
        <h3>Thread</h3>
        <button id="close-thread-button" aria-label="Close thread">
          &times;
        </button>
      </div>
      <div id="thread-content-container"></div>
      <form id="thread-form">
        <input
          type="text"
          id="thread-input"
          placeholder="Reply in thread..."
          aria-label="Thread reply message"
          required
        />
        <button type="submit" aria-label="Send reply">Send</button>
      </form>
    </aside>

    <div id="about-modal" class="modal-overlay hidden">
      <div class="modal-content">
        <button
          id="close-modal-button"
          class="close-button"
          aria-label="Close modal"
        >
          &times;
        </button>
        <h2>About Taurus AI</h2>
        <p>
          Taurus AI is an intelligent chat assistant powered by Google's Gemini
          API. It's designed to be a versatile conversational partner, capable
          of answering questions, generating creative text, and assisting with
          various tasks.
        </p>
        <p>
          This application demonstrates the power and flexibility of the Gemini
          API in a real-time, interactive chat experience with features like
          voice input, file attachments, and persistent chat history.
        </p>
        <h3>Technologies Used:</h3>
        <ul>
          <li><strong>Google Gemini API:</strong> For advanced AI responses.</li>
          <li><strong>TypeScript:</strong> For robust, type-safe code.</li>
          <li>
            <strong>Marked.js:</strong> For rendering Markdown in responses.
          </li>
          <li>
            <strong>highlight.js:</strong> For beautiful syntax highlighting in
            code blocks.
          </li>
          <li>
            <strong>Web Speech API:</strong> For seamless voice-to-text input.
          </li>
        </ul>
      </div>
    </div>

    <div id="command-palette-overlay" class="modal-overlay hidden">
      <div class="command-palette">
        <input
          type="text"
          id="command-palette-input"
          placeholder="Type a command or search..."
        />
        <ul id="command-palette-list"></ul>
      </div>
    </div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>
